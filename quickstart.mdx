---
title: "Quickstart"
description: "Start building awesome apps in under 5 minutes"
---

<Info>**Prerequisite** You should already have a Next.js app created.</Info>

### Step 1. Install Protocol Auth in your NextjS app:

<CodeGroup>
```bash pnpm
pnpm add @protoxyz/auth
```

```bash npm
npm i @protoxyz/auth
```

```bash yarn
yarn add @protoxyz/auth
```

```bash bun
bun install @protoxyz/auth
```

</CodeGroup>

### Step 2. Create a project at [https://studio.pxyz.dev](https://studio.pxyz.dev)

<Frame>
  <img
    src="/images/studio-create-project.png"
    style={{ borderRadius: "0.5rem" }}
  />
</Frame>

Once created, you will see environment variables for your project on the dashboard.

<Frame>
  <img src="/images/studio-dashboard.png" style={{ borderRadius: "0.5rem" }} />
</Frame>

### Step 3. Add the environment variables to your `.env` file:

<CodeGroup>
```bash .env
NEXT_PUBLIC_PXYZ_TENANT_ID=...
NEXT_PUBLIC_PXYZ_PUBLIC_KEY=...
NEXT_PUBLIC_PXYZ_DOMAIN=...
PXYZ_SECRET_KEY=...
```

</CodeGroup>

### Step 4. Protect pages (app router)

Add the following code to lib/auth.ts:

```ts
import { getAuth } from "@protoxyz/auth";

interface ProtectOptions {
  role?: string;
  orgRole?: string;
}

export async function auth() {
  const session = await getAuth({
    secretKey: process.env.PXYZ_SECRET_KEY,
  });

  if (!session) {
    return null;
  }

  return session;
}

export const protectPage = async (options?: ProtectOptions) => {
  const session = await auth();

  if (!session) {
    return redirect(getLoginUrl());
  }

  if (options?.role && session.claims?.role !== options.role) {
    return redirect("/unauthorized");
  }

  return session;
};
```

### Step 5. Protect pages (app router)

Add the following code to your app router:

```ts
import { auth } from "@/lib/auth";

export const config = {
  runtime: "edge",
  middlewareStack: [
    auth.middleware,
    // ... other middleware
  ],
};
```
